<main class="style-guide">
  <h1 class="style-guide__title">Design System - GestStore</h1>

  <nav class="style-guide__nav">
    <button 
      class="button button--secondary" 
      (click)="switchView('components')"
      [class.button--active]="currentView === 'components'">
      Componentes
    </button>
    <button 
      class="button button--secondary" 
      (click)="switchView('interactive')"
      [class.button--active]="currentView === 'interactive'">
      Interactivos
    </button>
    <button 
      class="button button--secondary" 
      (click)="switchView('colors')"
      [class.button--active]="currentView === 'colors'">
      Colores
    </button>
    <button 
      class="button button--secondary" 
      (click)="switchView('typography')"
      [class.button--active]="currentView === 'typography'">
      Tipografía
    </button>
    <button 
      class="button button--secondary" 
      (click)="switchView('login')"
      [class.button--active]="currentView === 'login'">
      Login
    </button>
    <button 
      class="button button--secondary" 
      (click)="switchView('register')"
      [class.button--active]="currentView === 'register'">
      Register
    </button>
    <button 
      class="button button--secondary" 
      (click)="switchView('page')"
      [class.button--active]="currentView === 'page'">
      Página
    </button>
    <button 
      class="button button--secondary" 
      (click)="switchView('services')"
      [class.button--active]="currentView === 'services'">
      Servicios (Fase 2)
    </button>
    <button 
      class="button button--secondary" 
      (click)="switchView('forms')"
      [class.button--active]="currentView === 'forms'">
      Formularios (Fase 3)
    </button>
  </nav>

  @if (currentView === 'components') {
    <!-- BOTONES -->
    <section class="section">
      <h2 class="section__title">Botones</h2>
      <p class="section__description">Componentes de acción interactivos con múltiples variantes, tamaños y estados</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Variantes de Color</h3>
        <figure class="component-showcase">
          <button class="button button--primary">Primary</button>
          <button class="button button--secondary">Secondary</button>
          <button class="button button--tertiary">Tertiary</button>
          <button class="button button--success">Success</button>
          <button class="button button--error">Error</button>
          <button class="button button--warning">Warning</button>
        </figure>
      </section>

      <section class="subsection">
        <h3 class="subsection__title">Tamaños</h3>
        <figure class="component-showcase">
          <button class="button button--primary button--small">Small</button>
          <button class="button button--primary button--medium">Medium (Default)</button>
          <button class="button button--primary button--large">Large</button>
        </figure>
      </section>

      <section class="subsection">
        <h3 class="subsection__title">Estados</h3>
        <figure class="component-showcase">
          <button class="button button--primary">Normal / Hover</button>
          <button class="button button--primary" disabled>Disabled</button>
          <button class="button button--primary button--full-width">Full Width</button>
        </figure>
      </section>
    </section>

    <!-- BADGES -->
    <section class="section">
      <h2 class="section__title">Badges</h2>
      <p class="section__description">Etiquetas pequeñas para estados, categorías y notificaciones</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Variantes de Color</h3>
        <figure class="component-showcase">
          <app-badge variant="primary">Primary</app-badge>
          <app-badge variant="secondary">Secondary</app-badge>
          <app-badge variant="success">Success</app-badge>
          <app-badge variant="error">Error</app-badge>
          <app-badge variant="warning">Warning</app-badge>
          <app-badge variant="info">Info</app-badge>
        </figure>
      </section>
    </section>

    <!-- TAGS -->
    <section class="section">
      <h2 class="section__title">Tags</h2>
      <p class="section__description">Etiquetas removibles para selecciones y filtros</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Variantes de Color</h3>
        <figure class="component-showcase">
          <app-tag variant="default">Default</app-tag>
          <app-tag variant="primary">Primary</app-tag>
          <app-tag variant="success">Success</app-tag>
          <app-tag variant="error">Error</app-tag>
          <app-tag variant="warning">Warning</app-tag>
        </figure>
      </section>
    </section>

    <!-- ALERTS -->
    <section class="section">
      <h2 class="section__title">Alerts</h2>
      <p class="section__description">Componentes de retroalimentación con iconos para mensajes importantes</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Tipos de Mensaje</h3>
        <figure class="component-showcase component-showcase--vertical">
          <app-alert type="success">¡Operación completada exitosamente! Los cambios han sido guardados.</app-alert>
          <app-alert type="error">Error: No se pudo completar la operación. Intenta de nuevo más tarde.</app-alert>
          <app-alert type="warning">Advertencia: Verifica los datos antes de continuar. Algunos campos podrían ser inválidos.</app-alert>
          <app-alert type="info">Información: Recuerda guardar tus cambios antes de salir de la página.</app-alert>
        </figure>
      </section>
    </section>

    <!-- CARDS -->
    <section class="section">
      <h2 class="section__title">Cards</h2>
      <p class="section__description">Tarjetas para agrupar y organizar contenido de forma visual</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Niveles de Sombra</h3>
        <figure class="component-showcase">
          <app-card shadow="small" title="Shadow Small">
            <p>Contenido con sombra mínima</p>
          </app-card>
          <app-card shadow="medium" title="Shadow Medium">
            <p>Contenido con sombra mediana</p>
          </app-card>
          <app-card shadow="large" title="Shadow Large">
            <p>Contenido con sombra grande</p>
          </app-card>
        </figure>
      </section>
    </section>

    <!-- FORM INPUTS -->
    <section class="section">
      <h2 class="section__title">Form Inputs</h2>
      <p class="section__description">Campos de texto con diversos estados y configuraciones</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Ejemplos de Uso</h3>
        <figure class="component-showcase component-showcase--vertical">
          <app-form-input 
            id="sg-input-1"
            name="nombre"
            label="Nombre completo" 
            placeholder="Ingresa tu nombre"
            type="text"
          />
          <app-form-input 
            id="sg-input-2"
            name="email"
            label="Email" 
            placeholder="tu@email.com"
            type="email"
          />
          <app-form-input 
            id="sg-input-3"
            name="password"
            label="Contraseña" 
            placeholder="••••••••"
            type="password"
            [helpText]="'Mínimo 8 caracteres, letras y números'"
          />
        </figure>
      </section>
    </section>

    <!-- FORM TEXTAREA -->
    <section class="section">
      <h2 class="section__title">Form Textarea</h2>
      <p class="section__description">Campos de texto largo para comentarios y descripciones</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Ejemplos de Uso</h3>
        <figure class="component-showcase component-showcase--vertical">
          <app-form-textarea 
            id="sg-textarea-1"
            name="descripcion"
            label="Descripción del Producto" 
            placeholder="Escribe una descripción detallada"
            [rows]="4"
          />
          <app-form-textarea 
            id="sg-textarea-2"
            name="comentarios"
            label="Comentarios Adicionales" 
            placeholder="Comparte tus comentarios aquí"
            [rows]="3"
            [helpText]="'Máximo 500 caracteres'"
          />
        </figure>
      </section>
    </section>

    <!-- FORM SELECT -->
    <section class="section">
      <h2 class="section__title">Form Select</h2>
      <p class="section__description">Desplegables con opciones para selecciones predefinidas</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Ejemplos de Uso</h3>
        <figure class="component-showcase component-showcase--vertical">
          <app-form-select 
            id="sg-select-1"
            name="country"
            label="Selecciona un País" 
            placeholder="Elige un país"
            [options]="selectOptions"
          />
          <app-form-select 
            id="sg-select-2"
            name="category"
            label="Categoría" 
            placeholder="Selecciona una categoría"
            [options]="selectOptions"
            [helpText]="'Elige la categoría que mejor se ajuste'"
          />
        </figure>
      </section>
    </section>
  }

  <!-- COLORES SECTION -->
  @if (currentView === 'colors') {
    <!-- PRIMARIOS -->
    <section class="section">
      <h2 class="section__title">Color Primario</h2>
      <p class="section__description">Paleta completa del color primario usado en la mayoría del diseño</p>
      <ul class="color-grid">
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--primary-light"></figure>
          <figcaption class="color-card__info">
            <strong>Primary Light</strong>
            <code>#f0efff</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--primary-light-hover"></figure>
          <figcaption class="color-card__info">
            <strong>Primary Light Hover</strong>
            <code>#e9e6ff</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--primary-light-active"></figure>
          <figcaption class="color-card__info">
            <strong>Primary Light Active</strong>
            <code>#d1ccff</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--primary-normal"></figure>
          <figcaption class="color-card__info">
            <strong>Primary Normal</strong>
            <code>#6b5aff</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--primary-hover"></figure>
          <figcaption class="color-card__info">
            <strong>Primary Hover</strong>
            <code>#6051e6</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--primary-active"></figure>
          <figcaption class="color-card__info">
            <strong>Primary Active</strong>
            <code>#5648cc</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--primary-dark"></figure>
          <figcaption class="color-card__info">
            <strong>Primary Dark</strong>
            <code>#504dbf</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--primary-dark-hover"></figure>
          <figcaption class="color-card__info">
            <strong>Primary Dark Hover</strong>
            <code>#403699</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--primary-dark-active"></figure>
          <figcaption class="color-card__info">
            <strong>Primary Dark Active</strong>
            <code>#302873</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--primary-darker"></figure>
          <figcaption class="color-card__info">
            <strong>Primary Darker</strong>
            <code>#25155f</code>
          </figcaption>
        </li>
      </ul>
    </section>

    <!-- GRISES - ESCALA COMPLETA -->
    <section class="section">
      <h2 class="section__title">Escala de Grises (Neutral)</h2>
      <p class="section__description">Colores neutrales completos usados en diseños, fondos, bordes y estados</p>
      <ul class="color-grid">
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--white"></figure>
          <figcaption class="color-card__info">
            <strong>White</strong>
            <code>#FFFFFF</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--gray-50"></figure>
          <figcaption class="color-card__info">
            <strong>Grey 50</strong>
            <code>#F8F9FA</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--gray-100"></figure>
          <figcaption class="color-card__info">
            <strong>Grey 100</strong>
            <code>#F1F1F1</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--gray-200"></figure>
          <figcaption class="color-card__info">
            <strong>Grey 200</strong>
            <code>#EAEAEA</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--gray-300"></figure>
          <figcaption class="color-card__info">
            <strong>Grey 300</strong>
            <code>#D4D4D4</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--gray-400"></figure>
          <figcaption class="color-card__info">
            <strong>Grey 400</strong>
            <code>#757575</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--gray-500"></figure>
          <figcaption class="color-card__info">
            <strong>Grey 500</strong>
            <code>#696969</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--gray-600"></figure>
          <figcaption class="color-card__info">
            <strong>Grey 600</strong>
            <code>#5E5E5E</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--gray-700"></figure>
          <figcaption class="color-card__info">
            <strong>Grey 700</strong>
            <code>#585858</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--gray-800"></figure>
          <figcaption class="color-card__info">
            <strong>Grey 800</strong>
            <code>#464646</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--gray-900"></figure>
          <figcaption class="color-card__info">
            <strong>Grey 900</strong>
            <code>#353535</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--gray-950"></figure>
          <figcaption class="color-card__info">
            <strong>Grey 950</strong>
            <code>#292929</code>
          </figcaption>
        </li>
      </ul>
    </section>

    <!-- COLORES ESPECIALES / ACENTOS -->
    <section class="section">
      <h2 class="section__title">Especiales y Acentos</h2>
      <p class="section__description">Colores de estado y acentos usados para feedback y énfasis</p>
      <ul class="color-grid">
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--error"></figure>
          <figcaption class="color-card__info">
            <strong>Error / Danger</strong>
            <code>#F21E1E</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--success"></figure>
          <figcaption class="color-card__info">
            <strong>Success</strong>
            <code>#05A301</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--info"></figure>
          <figcaption class="color-card__info">
            <strong>Info</strong>
            <code>#0225FF</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--warning"></figure>
          <figcaption class="color-card__info">
            <strong>Warning</strong>
            <code>#FFC107</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--side-menu"></figure>
          <figcaption class="color-card__info">
            <strong>Side Menu</strong>
            <code>#9747FF</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--black"></figure>
          <figcaption class="color-card__info">
            <strong>Black</strong>
            <code>#000000</code>
          </figcaption>
        </li>
      </ul>
    </section>

    <!-- COLORES DE TEXTO Y BORDES -->
    <section class="section">
      <h2 class="section__title">Texto y Bordes</h2>
      <p class="section__description">Colores semánticos para texto y bordes</p>
      <ul class="color-grid">
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--text-default"></figure>
          <figcaption class="color-card__info">
            <strong>Text Default</strong>
            <code>#212529</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--text-secondary"></figure>
          <figcaption class="color-card__info">
            <strong>Text Secondary</strong>
            <code>#495057</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--text-muted"></figure>
          <figcaption class="color-card__info">
            <strong>Text Muted</strong>
            <code>#868e96</code>
          </figcaption>
        </li>
        <li class="color-card">
          <figure class="color-card__swatch color-swatch--border-default"></figure>
          <figcaption class="color-card__info">
            <strong>Border Default</strong>
            <code>#e9ecef</code>
          </figcaption>
        </li>
      </ul>
    </section>
  }

  <!-- TIPOGRAFÍA SECTION -->
  @if (currentView === 'typography') {
    <section class="section">
      <h2 class="section__title">Estilo de Fuente - IBM Plex Sans</h2>
      <section class="typography-showcase">
        <article class="typography-item">
          <span class="typography-label">H1 - 72pt</span>
          <span class="typography-weight">Regular</span>
          <h1>IBM Plex Sans | Regular</h1>
        </article>
        
        <article class="typography-item">
          <span class="typography-label">H2 - 64pt</span>
          <span class="typography-weight">Medium</span>
          <h2>IBM Plex Sans | Medium</h2>
        </article>
        
        <article class="typography-item">
          <span class="typography-label">H3 - 56pt</span>
          <span class="typography-weight">Semi Bold</span>
          <h3>IBM Plex Sans | Semi-Bold</h3>
        </article>
        
        <article class="typography-item">
          <span class="typography-label">H4 - 24px</span>
          <span class="typography-weight">Semi Bold</span>
          <h4>IBM Plex Sans | Semi-Bold</h4>
        </article>

        <article class="typography-item">
          <span class="typography-label">Body 1 - 16px</span>
          <span class="typography-weight">Regular</span>
          <p>Este es un párrafo regular con texto de ejemplo usando Body 1. IBM Plex Sans es la fuente principal del proyecto.</p>
        </article>
      </section>
    </section>
  }

  <!-- COMPONENTES INTERACTIVOS -->
  @if (currentView === 'interactive') {
    <!-- THEME SWITCHER -->
    <section class="section">
      <h2 class="section__title">Theme Switcher</h2>
      <p class="section__description">Componente para alternar entre tema claro y oscuro. Detecta la preferencia del sistema y persiste la elección del usuario en localStorage.</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Toggle de Tema</h3>
        <figure class="component-showcase component-showcase--centered">
          <app-theme-switcher></app-theme-switcher>
        </figure>
        <p class="subsection__note">El tema seleccionado se guardará y aplicará automáticamente en futuras visitas.</p>
      </section>
    </section>

    <!-- MODAL -->
    <section class="section">
      <h2 class="section__title">Modal</h2>
      <p class="section__description">Ventanas modales interactivas con soporte para cierre con ESC, click fuera y focus trap para accesibilidad.</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Ejemplos de Modal</h3>
        <figure class="component-showcase">
          <button class="button button--primary" (click)="openDemoModal()">
            Abrir Modal Demo
          </button>
          <button class="button button--secondary" (click)="openConfirmModal()">
            Modal de Confirmación
          </button>
        </figure>
      </section>
    </section>
    
    <!-- Modal Demo -->
    <app-modal 
      #demoModal
      title="Modal de Demostración"
      size="medium"
      (closed)="onModalClosed()">
      <p>Este es un modal de ejemplo que demuestra las capacidades del componente:</p>
      <ul>
        <li>Cierre con tecla ESC</li>
        <li>Cierre al hacer click fuera (en el overlay)</li>
        <li>Focus trap para navegación con teclado</li>
        <li>Animaciones de entrada y salida</li>
        <li>Soporte para ARIA y lectores de pantalla</li>
      </ul>
    </app-modal>
    
    <!-- Modal de Confirmación -->
    <app-modal 
      #confirmModal
      title="Confirmar Acción"
      size="small"
      [showFooter]="true">
      <p>¿Estás seguro de que deseas realizar esta acción? Esta operación no se puede deshacer.</p>
      <div modal-footer>
        <button class="button button--secondary" (click)="confirmModal.close()">Cancelar</button>
        <button class="button button--primary" (click)="onConfirmAction()">Confirmar</button>
      </div>
    </app-modal>

    <!-- ACCORDION -->
    <section class="section">
      <h2 class="section__title">Acordeón</h2>
      <p class="section__description">Secciones expandibles/colapsables con navegación por teclado y soporte ARIA.</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Acordeón Simple</h3>
        <figure class="component-showcase component-showcase--vertical component-showcase--full">
          <app-accordion>
            <app-accordion-item title="¿Qué es GestStore?">
              <p>GestStore es una aplicación de gestión de inventario diseñada para pequeñas y medianas empresas. Permite controlar productos, categorías, proveedores y realizar seguimiento de stock en tiempo real.</p>
            </app-accordion-item>
            <app-accordion-item title="¿Cómo funciona el sistema de inventario?">
              <p>El sistema permite registrar entradas y salidas de productos, generar alertas de stock bajo, y crear informes detallados sobre el movimiento de mercancía.</p>
            </app-accordion-item>
            <app-accordion-item title="¿Puedo exportar los datos?">
              <p>Sí, GestStore permite exportar datos en múltiples formatos incluyendo CSV, Excel y PDF para facilitar el análisis y la integración con otros sistemas.</p>
            </app-accordion-item>
          </app-accordion>
        </figure>
      </section>
      
      <section class="subsection">
        <h3 class="subsection__title">Acordeón con Expansión Única</h3>
        <figure class="component-showcase component-showcase--vertical component-showcase--full">
          <app-accordion [singleExpand]="true">
            <app-accordion-item title="Política de Privacidad" [expanded]="true">
              <p>Respetamos tu privacidad. Los datos recopilados se utilizan únicamente para mejorar la experiencia del usuario y nunca se comparten con terceros sin consentimiento.</p>
            </app-accordion-item>
            <app-accordion-item title="Términos de Uso">
              <p>Al utilizar GestStore, aceptas nuestros términos de servicio que incluyen el uso responsable de la plataforma y el respeto a los derechos de otros usuarios.</p>
            </app-accordion-item>
            <app-accordion-item title="Contacto y Soporte">
              <p>Nuestro equipo de soporte está disponible de lunes a viernes de 9:00 a 18:00. Puedes contactarnos a través del formulario de contacto o enviando un email a soporte@geststore.com.</p>
            </app-accordion-item>
          </app-accordion>
        </figure>
      </section>
    </section>

    <!-- TABS -->
    <section class="section">
      <h2 class="section__title">Tabs (Pestañas)</h2>
      <p class="section__description">Sistema de pestañas con navegación por teclado, animaciones y múltiples variantes visuales.</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Tabs Default</h3>
        <figure class="component-showcase component-showcase--vertical component-showcase--full">
          <app-tabs (tabChanged)="onTabChanged($event)">
            <app-tab-panel label="Información General">
              <h4>Información General</h4>
              <p>GestStore es una solución completa para la gestión de inventario. Con una interfaz intuitiva y características avanzadas, facilita el control de stock para negocios de cualquier tamaño.</p>
            </app-tab-panel>
            <app-tab-panel label="Características">
              <h4>Características Principales</h4>
              <ul>
                <li>Gestión de productos y categorías</li>
                <li>Control de proveedores</li>
                <li>Alertas de stock bajo</li>
                <li>Informes y estadísticas</li>
                <li>Exportación de datos</li>
              </ul>
            </app-tab-panel>
            <app-tab-panel label="Precios">
              <h4>Planes de Precios</h4>
              <p>Ofrecemos planes flexibles adaptados a las necesidades de cada negocio, desde el plan gratuito para pequeños emprendedores hasta el plan enterprise para grandes organizaciones.</p>
            </app-tab-panel>
          </app-tabs>
        </figure>
      </section>
      
      <section class="subsection">
        <h3 class="subsection__title">Tabs Variante Pills</h3>
        <figure class="component-showcase component-showcase--vertical component-showcase--full">
          <app-tabs variant="pills">
            <app-tab-panel label="Dashboard">
              <p>Panel principal con métricas y estadísticas en tiempo real sobre el estado del inventario.</p>
            </app-tab-panel>
            <app-tab-panel label="Productos">
              <p>Gestión completa del catálogo de productos con búsqueda, filtros y edición masiva.</p>
            </app-tab-panel>
            <app-tab-panel label="Configuración" [disabled]="true">
              <p>Opciones de configuración del sistema (deshabilitado en demo).</p>
            </app-tab-panel>
          </app-tabs>
        </figure>
      </section>
    </section>

    <!-- TOOLTIP -->
    <section class="section">
      <h2 class="section__title">Tooltips</h2>
      <p class="section__description">Información contextual que aparece al pasar el cursor o al recibir focus. Accesibles con teclado.</p>
      
      <section class="subsection">
        <h3 class="subsection__title">Posiciones</h3>
        <figure class="component-showcase component-showcase--spaced">
          <button 
            class="button button--secondary"
            appTooltip="Tooltip arriba"
            tooltipPosition="top">
            Arriba
          </button>
          <button 
            class="button button--secondary"
            appTooltip="Tooltip abajo"
            tooltipPosition="bottom">
            Abajo
          </button>
          <button 
            class="button button--secondary"
            appTooltip="Tooltip izquierda"
            tooltipPosition="left">
            Izquierda
          </button>
          <button 
            class="button button--secondary"
            appTooltip="Tooltip derecha"
            tooltipPosition="right">
            Derecha
          </button>
        </figure>
      </section>
      
      <section class="subsection">
        <h3 class="subsection__title">Usos Prácticos</h3>
        <figure class="component-showcase component-showcase--spaced">
          <button 
            class="button button--primary"
            appTooltip="Guarda todos los cambios realizados en el formulario"
            tooltipPosition="top">
            Guardar
          </button>
          <button 
            class="button button--error"
            appTooltip="Elimina permanentemente este registro. Esta acción no se puede deshacer."
            tooltipPosition="top">
            Eliminar
          </button>
          <span 
            class="info-icon"
            tabindex="0"
            appTooltip="Haz clic aquí para obtener más información sobre esta funcionalidad"
            tooltipPosition="right">
            ℹ️
          </span>
        </figure>
      </section>
    </section>
  }

  <!-- LOGIN -->
  @if (currentView === 'login') {
    <app-login-form (backClicked)="switchView('components')"></app-login-form>
  }

  <!-- REGISTER -->
  @if (currentView === 'register') {
    <app-register-form (backClicked)="switchView('components')"></app-register-form>
  }

  <!-- PÁGINA COMPLETA -->
  @if (currentView === 'page') {
    <app-header></app-header>
    <app-main>
      <h1 class="page-demo__title">Contenido Principal</h1>
      <p class="page-demo__description">Esta es la vista de página completa mostrando el Header, Main y Footer en su disposición natural.</p>
      <section class="page-demo__content">
        <section class="page-demo__section">
          <h2>Sección de Ejemplo</h2>
          <p>Aquí puedes ver cómo se estructura la página con todos los componentes de layout trabajando juntos.</p>
        </section>
      </section>
    </app-main>
    <app-footer></app-footer>
  }

  <!-- SERVICIOS FASE 2 -->
  @if (currentView === 'services') {
    <section class="section">
      <h2 class="section__title">Servicios - Fase 2</h2>
      <p class="section__description">Demostración de los servicios de comunicación implementados en la Fase 2 del proyecto</p>

      <!-- NOTIFICACIONES TOAST -->
      <section class="subsection">
        <h3 class="subsection__title">Sistema de Notificaciones (Toast)</h3>
        <p class="subsection__description">NotificationService permite mostrar notificaciones en cualquier parte de la aplicación</p>
        
        <figure class="component-showcase">
          <button class="button button--success" (click)="showSuccessToast()">
            ✓ Toast Success
          </button>
          <button class="button button--danger" (click)="showErrorToast()">
            ✕ Toast Error
          </button>
          <button class="button button--warning" (click)="showWarningToast()">
            ⚠ Toast Warning
          </button>
          <button class="button button--primary" (click)="showInfoToast()">
            ℹ Toast Info
          </button>
          <button class="button button--secondary" (click)="showMultipleToasts()">
            Múltiples Toasts
          </button>
        </figure>
      </section>

      <!-- LOADING STATES -->
      <section class="subsection">
        <h3 class="subsection__title">Estados de Carga (Loading)</h3>
        <p class="subsection__description">LoadingService gestiona estados de carga globales y locales</p>
        
        <figure class="component-showcase component-showcase--column">
          <div class="demo-row">
            <button class="button button--primary" (click)="simulateGlobalLoading()">
              Simular Loading Global (2s)
            </button>
            <span class="demo-hint">Muestra un spinner fullscreen con overlay</span>
          </div>

          <div class="demo-row">
            <button 
              class="button button--secondary" 
              (click)="simulateButtonLoading()"
              [disabled]="isButtonLoading()">
              @if (isButtonLoading()) {
                <app-button-spinner></app-button-spinner>
                Enviando...
              } @else {
                Enviar Formulario
              }
            </button>
            <span class="demo-hint">Spinner dentro de un botón</span>
          </div>

          <div class="demo-row">
            <button class="button button--tertiary" (click)="simulateLocalLoading()">
              Activar Spinner Local
            </button>
            <div class="local-spinner-demo">
              <app-spinner 
                mode="local" 
                [loadingKey]="localSpinnerKey" 
                size="small">
              </app-spinner>
            </div>
          </div>
        </figure>

        <h4>Spinners - Tamaños</h4>
        <figure class="component-showcase">
          <div class="spinner-demo">
            <app-spinner mode="local" [show]="true" size="small"></app-spinner>
            <span>Small</span>
          </div>
          <div class="spinner-demo">
            <app-spinner mode="local" [show]="true" size="medium"></app-spinner>
            <span>Medium</span>
          </div>
          <div class="spinner-demo">
            <app-spinner mode="local" [show]="true" size="large"></app-spinner>
            <span>Large</span>
          </div>
        </figure>
      </section>

      <!-- EVENT BUS -->
      <section class="subsection">
        <h3 class="subsection__title">Bus de Eventos (EventBus)</h3>
        <p class="subsection__description">EventBusService permite comunicación desacoplada entre componentes</p>
        
        <figure class="component-showcase component-showcase--column">
          <div class="demo-row">
            <button class="button button--primary" (click)="emitCustomEvent()">
              Emitir Evento Personalizado
            </button>
            <button class="button button--secondary" (click)="emitUserEvent()">
              Emitir Evento de Usuario
            </button>
            <button class="button button--tertiary" (click)="clearEventLog()">
              Limpiar Log
            </button>
          </div>
          
          <div class="event-log">
            <h5>Log de Eventos:</h5>
            @if (eventLog().length === 0) {
              <p class="event-log__empty">No hay eventos registrados</p>
            } @else {
              @for (log of eventLog(); track log) {
                <div class="event-log__item">{{ log }}</div>
              }
            }
          </div>
        </figure>
      </section>

      <!-- STATE SERVICE -->
      <section class="subsection">
        <h3 class="subsection__title">Gestión de Estado (StateService)</h3>
        <p class="subsection__description">StateService mantiene el estado global de la aplicación</p>
        
        <figure class="component-showcase component-showcase--column">
          <div class="state-display">
            <div class="state-item">
              <span class="state-label">Sidebar:</span>
              <span class="state-value" [class.state-value--active]="isSidebarOpen">
                {{ isSidebarOpen ? 'Abierto' : 'Cerrado' }}
              </span>
            </div>
            <div class="state-item">
              <span class="state-label">Título de Página:</span>
              <span class="state-value">{{ currentPageTitle }}</span>
            </div>
          </div>
          
          <div class="demo-row">
            <button class="button button--primary" (click)="toggleSidebar()">
              Toggle Sidebar
            </button>
            <button class="button button--secondary" (click)="setPageTitle()">
              Cambiar Título
            </button>
          </div>
        </figure>
      </section>

      <!-- RESUMEN DE SERVICIOS -->
      <section class="subsection">
        <h3 class="subsection__title">Resumen de Servicios Implementados</h3>
        
        <div class="services-summary">
          <div class="service-card">
            <h4>NotificationService</h4>
            <ul>
              <li>Notificaciones toast con Subject/Observable</li>
              <li>Tipos: success, error, warning, info</li>
              <li>Auto-dismiss configurable</li>
              <li>Máximo de notificaciones simultáneas</li>
            </ul>
          </div>
          
          <div class="service-card">
            <h4>LoadingService</h4>
            <ul>
              <li>Loading global con contador de referencias</li>
              <li>Loading local por claves únicas</li>
              <li>Wrappers async: withGlobalLoading(), withLocalLoading()</li>
              <li>Compatible con Signals y Observables</li>
            </ul>
          </div>
          
          <div class="service-card">
            <h4>EventBusService</h4>
            <ul>
              <li>Patrón Publish/Subscribe</li>
              <li>emit(), on(), onPrefix()</li>
              <li>Eventos del sistema predefinidos</li>
              <li>Historial opcional para debugging</li>
            </ul>
          </div>
          
          <div class="service-card">
            <h4>StateService</h4>
            <ul>
              <li>Store centralizado con Signals</li>
              <li>Selectores computados</li>
              <li>Persistencia en localStorage</li>
              <li>Sistema de caché con timestamps</li>
            </ul>
          </div>
        </div>
      </section>
    </section>
  }

  <!-- FORMULARIOS FASE 3 -->
  @if (currentView === 'forms') {
    <section class="section">
      <h2 class="section__title">Formularios Reactivos - Fase 3</h2>
      <p class="section__description">Demostración de formularios reactivos con validadores personalizados síncronos, asíncronos y FormArray</p>

      <!-- VALIDADORES SÍNCRONOS -->
      <section class="subsection">
        <h3 class="subsection__title">Validadores Síncronos Personalizados</h3>
        <p class="subsection__description">Validadores que se ejecutan inmediatamente al cambiar el valor del campo</p>
        
        <form [formGroup]="demoSyncForm" class="demo-form">
          <div class="demo-form__row">
            <!-- Teléfono Español -->
            <div class="demo-form__field">
              <label for="demo-phone" class="form-label">Teléfono Español</label>
              <div class="form-input-wrapper">
                <input 
                  type="tel" 
                  id="demo-phone"
                  class="form-input"
                  formControlName="phone"
                  placeholder="612 345 678"
                  [class.form-input--error]="hasFieldError(demoSyncForm, 'phone')"
                  [class.form-input--valid]="isFieldValid(demoSyncForm, 'phone')"
                />
                @if (isFieldValid(demoSyncForm, 'phone')) {
                  <svg class="form-input__icon-status form-input__icon-status--valid" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                  </svg>
                }
              </div>
              @if (hasFieldError(demoSyncForm, 'phone')) {
                <span class="form-error">{{ getFieldErrorMessage(demoSyncForm, 'phone') }}</span>
              }
              <span class="form-hint">Valida formato: 6XX XXX XXX, 7XX XXX XXX, 9XX XXX XXX</span>
            </div>

            <!-- Código Postal -->
            <div class="demo-form__field">
              <label for="demo-postal" class="form-label">Código Postal</label>
              <div class="form-input-wrapper">
                <input 
                  type="text" 
                  id="demo-postal"
                  class="form-input"
                  formControlName="postalCode"
                  placeholder="28001"
                  maxlength="5"
                  [class.form-input--error]="hasFieldError(demoSyncForm, 'postalCode')"
                  [class.form-input--valid]="isFieldValid(demoSyncForm, 'postalCode')"
                />
                @if (isFieldValid(demoSyncForm, 'postalCode')) {
                  <svg class="form-input__icon-status form-input__icon-status--valid" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                  </svg>
                }
              </div>
              @if (hasFieldError(demoSyncForm, 'postalCode')) {
                <span class="form-error">{{ getFieldErrorMessage(demoSyncForm, 'postalCode') }}</span>
              }
              <span class="form-hint">Valida provincias españolas: 01-52</span>
            </div>

            <!-- NIF/NIE -->
            <div class="demo-form__field">
              <label for="demo-nif" class="form-label">NIF/NIE</label>
              <div class="form-input-wrapper">
                <input 
                  type="text" 
                  id="demo-nif"
                  class="form-input"
                  formControlName="nif"
                  placeholder="12345678Z"
                  maxlength="9"
                  [class.form-input--error]="hasFieldError(demoSyncForm, 'nif')"
                  [class.form-input--valid]="isFieldValid(demoSyncForm, 'nif')"
                />
                @if (isFieldValid(demoSyncForm, 'nif')) {
                  <svg class="form-input__icon-status form-input__icon-status--valid" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                  </svg>
                }
              </div>
              @if (hasFieldError(demoSyncForm, 'nif')) {
                <span class="form-error">{{ getFieldErrorMessage(demoSyncForm, 'nif') }}</span>
              }
              <span class="form-hint">Valida letra de control del NIF/NIE español</span>
            </div>
          </div>
        </form>

        <div class="validators-catalog">
          <h4>Catálogo de Validadores Síncronos</h4>
          <ul class="validators-list">
            <li><code>strongPasswordValidator()</code> - Mín. 8 caracteres, mayúscula, minúscula, número y especial</li>
            <li><code>passwordMatchValidator(field1, field2)</code> - Valida que dos campos coincidan</li>
            <li><code>nifNieValidator()</code> - Valida NIF/NIE español con letra de control</li>
            <li><code>spanishPhoneValidator()</code> - Valida teléfonos españoles (móviles y fijos)</li>
            <li><code>spanishPostalCodeValidator()</code> - Valida códigos postales por provincia</li>
            <li><code>onlyLettersValidator()</code> - Solo letras y espacios</li>
            <li><code>usernameFormatValidator()</code> - Alfanumérico con guiones/underscores</li>
            <li><code>rangeValidator(min, max)</code> - Rango numérico</li>
            <li><code>minDateValidator(date)</code> / <code>maxDateValidator(date)</code> - Validación de fechas</li>
            <li><code>adultAgeValidator()</code> - Mayor de 18 años</li>
            <li><code>spanishIbanValidator()</code> - Valida IBAN español (mod 97)</li>
            <li><code>urlValidator()</code> - Valida URLs</li>
          </ul>
        </div>
      </section>

      <!-- VALIDADORES ASÍNCRONOS -->
      <section class="subsection">
        <h3 class="subsection__title">Validadores Asíncronos</h3>
        <p class="subsection__description">Validadores que simulan consultas al servidor con debounce de 500ms</p>
        
        <form [formGroup]="demoAsyncForm" class="demo-form">
          <div class="demo-form__row">
            <!-- Email único -->
            <div class="demo-form__field">
              <label for="demo-async-email" class="form-label">Email (verifica disponibilidad)</label>
              <div class="form-input-wrapper">
                <input 
                  type="email" 
                  id="demo-async-email"
                  class="form-input"
                  formControlName="email"
                  placeholder="tu@email.com"
                  [class.form-input--error]="hasFieldError(demoAsyncForm, 'email')"
                  [class.form-input--valid]="isFieldValid(demoAsyncForm, 'email')"
                  [class.form-input--validating]="isFieldValidating(demoAsyncForm, 'email')"
                />
                @if (isFieldValidating(demoAsyncForm, 'email')) {
                  <span class="form-input__spinner"></span>
                }
                @if (isFieldValid(demoAsyncForm, 'email') && !isFieldValidating(demoAsyncForm, 'email')) {
                  <svg class="form-input__icon-status form-input__icon-status--valid" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                  </svg>
                }
              </div>
              @if (isFieldValidating(demoAsyncForm, 'email')) {
                <span class="form-hint form-hint--validating">Verificando disponibilidad...</span>
              }
              @if (hasFieldError(demoAsyncForm, 'email')) {
                <span class="form-error">{{ getFieldErrorMessage(demoAsyncForm, 'email') }}</span>
              }
              <span class="form-hint">Prueba: admin&#64;geststore.com, test&#64;email.com (ocupados)</span>
            </div>

            <!-- Username único -->
            <div class="demo-form__field">
              <label for="demo-async-username" class="form-label">Username (verifica disponibilidad)</label>
              <div class="form-input-wrapper">
                <input 
                  type="text" 
                  id="demo-async-username"
                  class="form-input"
                  formControlName="username"
                  placeholder="tu_usuario"
                  [class.form-input--error]="hasFieldError(demoAsyncForm, 'username')"
                  [class.form-input--valid]="isFieldValid(demoAsyncForm, 'username')"
                  [class.form-input--validating]="isFieldValidating(demoAsyncForm, 'username')"
                />
                @if (isFieldValidating(demoAsyncForm, 'username')) {
                  <span class="form-input__spinner"></span>
                }
                @if (isFieldValid(demoAsyncForm, 'username') && !isFieldValidating(demoAsyncForm, 'username')) {
                  <svg class="form-input__icon-status form-input__icon-status--valid" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                  </svg>
                }
              </div>
              @if (isFieldValidating(demoAsyncForm, 'username')) {
                <span class="form-hint form-hint--validating">Verificando disponibilidad...</span>
              }
              @if (hasFieldError(demoAsyncForm, 'username')) {
                <span class="form-error">{{ getFieldErrorMessage(demoAsyncForm, 'username') }}</span>
              }
              <span class="form-hint">Prueba: admin, superuser, root, demo_user (ocupados)</span>
            </div>
          </div>
        </form>

        <div class="validators-catalog">
          <h4>Características de Validadores Asíncronos</h4>
          <ul class="validators-list">
            <li><strong>Debounce de 500ms</strong> - Evita llamadas excesivas al servidor</li>
            <li><strong>updateOn: 'blur'</strong> - Valida al salir del campo para mejor UX</li>
            <li><strong>Spinner durante validación</strong> - Feedback visual del proceso</li>
            <li><code>createUniqueEmailValidator(service)</code> - Verifica email único</li>
            <li><code>createUniqueUsernameValidator(service)</code> - Verifica username único</li>
            <li><code>createUniqueNifValidator(service)</code> - Verifica NIF único</li>
          </ul>
        </div>
      </section>

      <!-- FORMARRAY -->
      <section class="subsection">
        <h3 class="subsection__title">FormArray - Campos Dinámicos</h3>
        <p class="subsection__description">Permite añadir y eliminar campos de formulario dinámicamente</p>
        
        <form [formGroup]="demoArrayForm" (ngSubmit)="onDemoArraySubmit()" class="demo-form demo-form--array">
          @if (demoFormSubmitted()) {
            <div class="form-success-banner">
              <svg viewBox="0 0 24 24" fill="currentColor" class="form-success-banner__icon">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
              ¡FormArray enviado correctamente!
            </div>
          }
          
          <div class="demo-array-header">
            <h4>Lista de Items</h4>
            <button 
              type="button" 
              class="button button--primary button--small"
              (click)="addDemoItem()"
              [disabled]="demoItems.length >= 5">
              + Añadir Item
            </button>
          </div>
          
          @if (demoItems.length === 0) {
            <div class="demo-array-empty">
              <p>No hay items. Haz clic en "Añadir Item" para empezar.</p>
            </div>
          }
          
          <div formArrayName="items" class="demo-array-list">
            @for (item of demoItems.controls; track item; let i = $index) {
              <div class="demo-array-item" [formGroupName]="i">
                <div class="demo-array-item__number">{{ i + 1 }}</div>
                
                <div class="demo-array-item__fields">
                  <div class="demo-form__field">
                    <label [for]="'item-name-' + i" class="form-label">Nombre</label>
                    <input 
                      type="text" 
                      [id]="'item-name-' + i"
                      class="form-input"
                      formControlName="name"
                      placeholder="Nombre del item"
                      [class.form-input--error]="hasItemFieldError(i, 'name')"
                    />
                    @if (hasItemFieldError(i, 'name')) {
                      <span class="form-error">{{ getItemFieldError(i, 'name') }}</span>
                    }
                  </div>
                  
                  <div class="demo-form__field demo-form__field--small">
                    <label [for]="'item-qty-' + i" class="form-label">Cantidad</label>
                    <input 
                      type="number" 
                      [id]="'item-qty-' + i"
                      class="form-input"
                      formControlName="quantity"
                      min="1"
                      [class.form-input--error]="hasItemFieldError(i, 'quantity')"
                    />
                    @if (hasItemFieldError(i, 'quantity')) {
                      <span class="form-error">{{ getItemFieldError(i, 'quantity') }}</span>
                    }
                  </div>
                </div>
                
                <button 
                  type="button" 
                  class="demo-array-item__remove"
                  (click)="removeDemoItem(i)"
                  title="Eliminar item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <polyline points="3 6 5 6 21 6"/>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                  </svg>
                </button>
              </div>
            }
          </div>
          
          <div class="demo-form__actions">
            <button 
              type="button" 
              class="button button--secondary"
              (click)="resetDemoArrayForm()">
              Limpiar
            </button>
            <button 
              type="submit" 
              class="button button--primary"
              [disabled]="demoItems.length === 0">
              Enviar FormArray
            </button>
          </div>
        </form>
      </section>

      <!-- FORMULARIOS COMPLETOS -->
      <section class="subsection">
        <h3 class="subsection__title">Formularios Completos Implementados</h3>
        <p class="subsection__description">Los formularios de Login, Register y Perfil utilizan todas las técnicas de validación</p>
        
        <div class="forms-links">
          <a routerLink="/login" class="form-link-card">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
              <polyline points="10 17 15 12 10 7"/>
              <line x1="15" y1="12" x2="3" y2="12"/>
            </svg>
            <div class="form-link-card__content">
              <h4>Login</h4>
              <p>Email y password con validadores síncronos</p>
            </div>
          </a>
          
          <a routerLink="/register" class="form-link-card">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
              <circle cx="8.5" cy="7" r="4"/>
              <line x1="20" y1="8" x2="20" y2="14"/>
              <line x1="23" y1="11" x2="17" y2="11"/>
            </svg>
            <div class="form-link-card__content">
              <h4>Register</h4>
              <p>Validadores síncronos, asíncronos y cross-field (passwordMatch)</p>
            </div>
          </a>
          
          <a routerLink="/profile" class="form-link-card">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
            <div class="form-link-card__content">
              <h4>Perfil</h4>
              <p>FormArray para múltiples direcciones de envío</p>
            </div>
          </a>
        </div>
      </section>

      <!-- RESUMEN TÉCNICO -->
      <section class="subsection">
        <h3 class="subsection__title">Resumen Técnico - Fase 3</h3>
        
        <div class="services-summary">
          <div class="service-card">
            <h4>Formularios Reactivos</h4>
            <ul>
              <li>FormBuilder para construcción declarativa</li>
              <li>FormGroup para agrupación de campos</li>
              <li>FormControl con validadores</li>
              <li>FormArray para campos dinámicos</li>
            </ul>
          </div>
          
          <div class="service-card">
            <h4>Validadores Síncronos</h4>
            <ul>
              <li>ValidatorFn con AbstractControl</li>
              <li>ValidationErrors tipados</li>
              <li>Cross-field validation</li>
              <li>Validaciones específicas España</li>
            </ul>
          </div>
          
          <div class="service-card">
            <h4>Validadores Asíncronos</h4>
            <ul>
              <li>AsyncValidatorFn con Observables</li>
              <li>Debounce con timer() de RxJS</li>
              <li>switchMap para cancelar peticiones</li>
              <li>Estados pending para UX</li>
            </ul>
          </div>
          
          <div class="service-card">
            <h4>Gestión de Estados</h4>
            <ul>
              <li>touched/dirty para mostrar errores</li>
              <li>pending para validación async</li>
              <li>valid/invalid para submit</li>
              <li>Signals para loading states</li>
            </ul>
          </div>
        </div>
      </section>
    </section>
  }
</main>



